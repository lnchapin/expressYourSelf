<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Results</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/4.0.0/flatly/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </head>
  <body>
    <h1>What are the stats like?</h1>

    <script type="text/javascript">
      var feelingsCount={};
      var categoryCount={};

      var feelingsValue;
      var feelingsLabel;
      var categoryValue;
      var categoryLabel;

      $.get("/api/responses")
        .then(data=>{
          for(var i = 0; i < data.length; i++){
            if(feelingsCount.hasOwnProperty(data[i].feeling)){
              feelingsCount[`${data[i].feeling}`]+=1
            } else {
              feelingsCount[`${data[i].feeling}`] = 1
            }
            if(categoryCount.hasOwnProperty(data[i].category)){
              categoryCount[`${data[i].category}`]+=1
            }else{
              categoryCount[`${data[i].category}`]=1
            }
          }

          console.log(feelingsCount)
          console.log(categoryCount)
          feelingsValues=Object.values(feelingsCount)
          feelingsLabel=Object.keys(feelingsCount)
          categoryValues=Object.values(categoryCount)
          categoryLabel=Object.keys(categoryCount)
          console.log(feelingsLabel)
          console.log(categoryLabel)
          console.log(feelingsValue)
          console.log(categoryValue)
        })


    </script>
  </body>
</html>
